var FID={elements:{},gauge:{},geoConfig:{enableHighAccuracy:!0,timeout:Infinity,maximumAge:1E4},gaugeConfig:{lines:12,angle:0.15,lineWidth:0.44,pointer:{length:0.9,strokeWidth:0.055,color:"#000000"},limitMax:"false",colorStart:"#6FADCF",colorStop:"#8FC0DA",strokeColor:"#E0E0E0",generateGradient:!0},showPosition:function(a){var b=Math.round(a.coords.altitude)||"&mdash;",d=Math.round(a.coords.altitudeAccuracy)||"&mdash;",f=a.coords.heading||"&mdash;",c=Math.round(3.6*a.coords.speed),e=FID.calculateVS(a)||
	"&mdash;",g=(new Date(a.timestamp)).toLocaleTimeString(),h=a.coords.latitude.toFixed(7)+"<br />"+a.coords.longitude.toFixed(7)||"&mdash;";a=Math.round(a.coords.accuracy)||"&mdash;";FID.debug(JSON.stringify({GS:c,A:b,VS:e,H:f}));FID.elements.altitude.innerHTML=b;FID.elements.altitudeAccuracy.innerHTML=d;FID.elements.groundSpeed.innerHTML=c;FID.elements.heading.innerHTML=f;FID.elements.verticalSpeed.innerHTML=e;FID.elements.location.innerHTML=h;FID.elements.locationAccuracy.innerHTML=a;FID.elements.updated.innerHTML=
	g;!isNaN(b)&&0<b&&FID.gauge.altitude.set(b);!isNaN(c)&&0<c&&FID.gauge.groundSpeed.set(c);isNaN(e)||FID.gauge.verticalSpeed.set(Math.abs(e))},calculateVS:function(a){if(a.timestamp&&FID.oldPosition.timestamp){var b=1E3*(a.timestamp-FID.oldPosition.timestamp),d=a.coords.altitude-FID.oldPosition.coords.altitude;console.dir(a,FID.oldPosition);FID.debug("Altitude changed: "+d/b);return Math.round(d/b)}FID.debug("V/S requires old position, which isn't present.");return null},errorHandler:function(a){FID.debug("Err!");
	var b=document.getElementById("message");b.style.display="block";switch(a.code){case a.PERMISSION_DENIED:b.innerHTML="You must allow geolocation!";break;case a.POSITION_UNAVAILABLE:b.innerHTML="Location information is unavailable.";break;case a.TIMEOUT:b.innerHTML="Timed out.";break;case a.UNKNOWN_ERROR:b.innerHTML="An unknown error occurred."}},startMonitor:function(){FID.debug("Watching...");FID.geoWatch=navigator.geolocation.watchPosition(function(a){FID.debug("Position Changed!");FID.showPosition(a);
	FID.oldPosition=a},FID.errorHandler,FID.geoConfig);document.getElementById("monitor").innerHTML="Stop";document.getElementById("state").innerHTML="(Monitoring)"},clearMonitor:function(){FID.debug("Cleared watch!");FID.geoWatch&&(navigator.geolocation.clearWatch(FID.geoWatch),delete FID.geoWatch);FID.geoInterval&&(window.clearInterval(FID.geoInterval),delete FID.geoInterval);document.getElementById("monitor").innerHTML="Monitor";document.getElementById("state").innerHTML="(Stale Position)"},init:function(){document.getElementById("monitor").addEventListener("click",
	function(){void 0===FID.geoWatch?FID.startMonitor():FID.clearMonitor()});navigator.geolocation?(FID.debug("I can haz geolocation!"),FID.elements.altitude=document.querySelector("#altitude .data .value"),FID.elements.altitudeAccuracy=document.querySelector("#altitude .accuracy .value"),FID.elements.heading=document.querySelector("#heading .data .value"),FID.elements.groundSpeed=document.querySelector("#ground-speed .data .value"),FID.elements.verticalSpeed=document.querySelector("#vertical-speed .data .value"),
	FID.elements.location=document.querySelector("#location .data .value"),FID.elements.locationAccuracy=document.querySelector("#location .accuracy .value"),FID.elements.updated=document.querySelector("#updated"),FID.gauge.altitude=(new Gauge(document.querySelector("#altitude canvas"))).setOptions(FID.gaugeConfig),FID.gauge.altitude.maxValue=150,FID.gauge.altitude.animationSpeed=50,FID.gauge.altitude.set(0),FID.gauge.groundSpeed=(new Gauge(document.querySelector("#ground-speed canvas"))).setOptions(FID.gaugeConfig),
	FID.gauge.groundSpeed.maxValue=150,FID.gauge.groundSpeed.animationSpeed=50,FID.gauge.groundSpeed.set(0),FID.gauge.verticalSpeed=(new Gauge(document.querySelector("#vertical-speed canvas"))).setOptions(FID.gaugeConfig),FID.gauge.verticalSpeed.maxValue=5,FID.gauge.verticalSpeed.animationSpeed=50,FID.gauge.verticalSpeed.set(0),FID.oldPosition={},FID.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,
	FID.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame):FID.errorHandler()}};(function(){document.addEventListener("DOMContentLoaded",function(a){FID.debug=function(a){console.log(a)};FID.init()})})();